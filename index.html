<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>T‑Gear Builder • Bot‑ID</title>
  <meta name="description" content="DE/EN Bot‑Landing mit Kategorien, Bot‑ID, Mitarbeiter‑Modus und Themes." />
  <style>
    :root{
      --bg:#0b0b0e; --text:#f2f2f5; --muted:#b9bbc6; --card:#131319; --accent:#60c83c; --ring:#60c83c;
      --brand:#e6e6ea; --danger:#ff5a5f; --ok:#26bf6e; --border:#24242b; --shadow:0 8px 22px rgba(0,0,0,.35)
    }
    /* THEMES */
    .theme-standard-black{ --bg:#0b0b0e; --text:#f2f2f5; --card:#131319; --accent:#60c83c; --brand:#e6e6ea; --border:#24242b }
    .theme-standard-white{ --bg:#fafafc; --text:#0f1218; --card:#ffffff; --accent:#2f8dff; --brand:#101218; --border:#e8e9ef }
    .theme-dragon-black-red{ --bg:#0a0708; --text:#f5e9ea; --card:#140b0d; --accent:#e32636; --brand:#f5e9ea; --border:#2a1518 }
    .theme-dragon-gold{ --bg:#120f06; --text:#fff8de; --card:#1b1709; --accent:#d4af37; --brand:#fff3c6; --border:#2e260c }
    .theme-giftgruen{ --bg:#051007; --text:#eaffef; --card:#0a1b0f; --accent:#60c83c; --brand:#eaffef; --border:#13331e }

    html,body{height:100%}
    body{margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif; background:var(--bg); color:var(--text)}
    .wrap{max-width:1200px; margin:0 auto; padding:16px 16px 120px}
    header{position:sticky; top:0; backdrop-filter:saturate(1.1) blur(8px); background:color-mix(in oklab, var(--bg) 88%, transparent); border-bottom:1px solid var(--border); z-index:10}
    .head{display:flex; gap:12px; align-items:center; justify-content:space-between; padding:12px 16px}
    .brand{display:flex; gap:14px; align-items:center}
    .logo{width:40px; height:40px; border:2px solid var(--accent); border-radius:12px; box-shadow:var(--shadow); position:relative}
    .logo::after{content:""; position:absolute; inset:8px; border-radius:8px; border:2px dashed var(--accent)}
    .title{font-weight:800; letter-spacing:.2px}
    .muted{color:var(--muted)}
    .row{display:flex; flex-wrap:wrap; gap:8px}
    .pill{padding:8px 12px; border:1px solid var(--border); border-radius:999px; background:var(--card)}
    .btn{appearance:none; border:1px solid var(--border); background:var(--card); color:var(--text); padding:10px 14px; border-radius:14px; cursor:pointer; box-shadow:var(--shadow); font-weight:600}
    .btn:active{transform:translateY(1px)}
    .btn.ghost{background:transparent}
    .btn.primary{border-color:color-mix(in oklab, var(--accent) 70%, var(--border));}
    .grid{display:grid; grid-template-columns:repeat(7, minmax(0,1fr)); gap:12px}
    @media (max-width:1024px){ .grid{grid-template-columns:repeat(4, minmax(0,1fr));} }
    @media (max-width:640px){ .grid{grid-template-columns:repeat(2, minmax(0,1fr));} }
    .card{background:var(--card); border:1px solid var(--border); border-radius:18px; padding:14px; box-shadow:var(--shadow); display:flex; flex-direction:column; gap:10px}
    .card h3{margin:0; font-size:16px}
    .card p{margin:0; font-size:12px; color:var(--muted)}
    .card .icon{font-size:30px}

    .panel{display:grid; grid-template-columns:1fr; gap:12px; margin-top:14px}
    .chat{background:var(--card); border:1px solid var(--border); border-radius:18px; padding:14px; display:flex; flex-direction:column; gap:10px}
    .chatlog{height:220px; overflow:auto; border:1px dashed var(--border); border-radius:12px; padding:10px}
    .inputrow{display:flex; gap:8px}
    input[type=text]{flex:1; background:transparent; border:1px solid var(--border); color:var(--text); padding:12px 12px; border-radius:12px}

    .badges{display:flex; gap:8px; flex-wrap:wrap}
    .badge{border:1px solid var(--border); background:var(--card); padding:6px 10px; border-radius:999px; font-size:12px}

    .footer{position:fixed; inset:auto 0 0 0; border-top:1px solid var(--border); background:var(--bg); padding:10px 16px; display:flex; gap:10px; align-items:center; justify-content:space-between}

    .employee{display:none}
    .employee.active{display:block}

    /* hidden login overlay */
    .overlay{position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.55); z-index:50}
    .overlay.show{display:flex}
    .sheet{background:var(--card); border:1px solid var(--border); border-radius:18px; padding:18px; width:min(520px, 92vw); box-shadow:var(--shadow);}

    /* thumbnails container */
    .thumbs{display:flex; gap:12px; flex-wrap:wrap}
    .thumbs img{display:block; width:280px; height:auto; border-radius:14px; border:1px solid var(--border)}

    .hint{font-size:12px; color:var(--muted)}
  </style>
</head>
<body class="theme-standard-black">
  <header>
    <div class="head wrap">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <div class="title">T‑Gear Builder</div>
          <div class="muted" id="subtitle">Wähle deine Kategorie</div>
        </div>
      </div>
      <div class="row">
        <button class="btn ghost" id="langBtn" aria-label="Language Toggle">EN</button>
        <select class="btn" id="themeSel" title="Theme">
          <option value="standard-black">Standard Black</option>
          <option value="standard-white">Standard White</option>
          <option value="dragon-black-red">Dragon Black/Red</option>
          <option value="dragon-gold">Dragon Gold</option>
          <option value="giftgruen">Giftgrün</option>
        </select>
        <button class="btn" id="helpBtn">/help</button>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="badges" aria-label="Designs">
      <span class="badge">Standard Black</span>
      <span class="badge">Standard White</span>
      <span class="badge">Dragon Black/Red</span>
      <span class="badge">Dragon Gold</span>
      <span class="badge">Giftgrün</span>
    </section>

    <div style="height:14px"></div>

    <section class="thumbs" id="thumbs">
      <!-- Thumbnails (links are placeholders and should be replaced with your repo paths) -->
      <figure>
        <img src="./assets/tgear_title_de.webp" alt="Titelbild Deutsch" onerror="this.style.display='none'">
        <figcaption class="hint">Titelbild (DE)</figcaption>
      </figure>
      <figure>
        <img src="./assets/tgear_title_en.webp" alt="Title Image English" onerror="this.style.display='none'">
        <figcaption class="hint">Title Image (EN)</figcaption>
      </figure>
      <figure>
        <img src="./assets/tgear_thumb_de_600.webp" alt="Thumbnail 600 Deutsch" onerror="this.style.display='none'">
        <figcaption class="hint">Thumbnail 600×600 (DE)</figcaption>
      </figure>
      <figure>
        <img src="./assets/tgear_thumb_en_600.webp" alt="Thumbnail 600 English" onerror="this.style.display='none'">
        <figcaption class="hint">Thumbnail 600×600 (EN)</figcaption>
      </figure>
    </section>

    <div style="height:14px"></div>

    <section class="card">
      <div class="muted" id="promo">Gaming‑Laptops · Laptops · Desktop‑PCs · Chromebooks · Handys · Tablets · E‑Scooter</div>
      <div class="grid" id="cats">
        <!-- Category cards will be injected by JS -->
      </div>
    </section>

    <section class="panel">
      <div class="chat">
        <div class="row" style="justify-content:space-between; align-items:center">
          <div class="muted">Bot‑ID: <span id="botId">…</span></div>
          <div class="muted">Mitarbeiter‑Modus: <span id="empState">aus</span></div>
        </div>
        <div class="chatlog" id="log" aria-live="polite"></div>
        <div class="inputrow">
          <input id="inp" type="text" placeholder="Schreib /help für Befehle… (Ctrl+Alt+# öffnet Login)" />
          <button class="btn primary" id="send">Senden</button>
        </div>
      </div>

      <div class="employee" id="employeePanel">
        <div class="card">
          <h3>Employee Tools</h3>
          <p class="muted" id="empHint">Nur sichtbar, wenn eingeloggt. Passcode: hinterlegt.</p>
          <div class="row">
            <button class="btn" data-tool="orders">🧾 Orders</button>
            <button class="btn" data-tool="inventory">📦 Inventory</button>
            <button class="btn" data-tool="messages">💬 Messages</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <div class="footer wrap">
    <div class="hint">Hotkeys: Ctrl+Alt+# = Login • /de, /en • /theme <i>name</i> • /id • /setid X • /category <i>name</i> • /login • /logout • /flow</div>
    <div class="row">
      <button class="btn ghost" id="deBtn">DE</button>
      <button class="btn ghost" id="enBtn">EN</button>
    </div>
  </div>

  <!-- Login Overlay -->
  <div class="overlay" id="overlay" role="dialog" aria-modal="true">
    <div class="sheet">
      <h3 id="loginTitle">Mitarbeiter‑Login</h3>
      <p class="muted" id="loginInfo">Drücke Ctrl+Alt+# jederzeit, um dieses Fenster zu öffnen. Code eingeben:</p>
      <div class="row" style="gap:10px; margin-top:6px">
        <input id="code" type="text" placeholder="Passcode" />
        <button class="btn primary" id="enter">OK</button>
        <button class="btn" id="close">Schließen</button>
      </div>
      <p class="hint" id="loginHint">Standard‑Code: 140318 • /login öffnet auch</p>
    </div>
  </div>

  <script>
    const $ = sel => document.querySelector(sel);
    const tr = {
      de: {
        subtitle: 'Wähle deine Kategorie',
        promo: 'Gaming‑Laptops · Laptops · Desktop‑PCs · Chromebooks · Handys · Tablets · E‑Scooter',
        loginTitle: 'Mitarbeiter‑Login',
        loginInfo: 'Drücke Ctrl+Alt+# jederzeit, um dieses Fenster zu öffnen. Code eingeben:',
        loginHint: 'Standard‑Code: 140318 • /login öffnet auch',
        placeholder: 'Schreib /help für Befehle… (Ctrl+Alt+# öffnet Login)',
        help: `Befehle:\n  /help — zeigt diese Hilfe\n  /de /en — Sprache umstellen\n  /theme NAME — Themes: standard-black, standard-white, dragon-black-red, dragon-gold, giftgruen\n  /id — aktuelle Bot‑ID anzeigen\n  /setid NEUE_ID — Bot‑ID setzen (lokal gespeichert)\n  /category NAME — Kategorie öffnen (z.B. gaming-laptops)\n  /login — Login‑Dialog öffnen\n  /logout — Mitarbeiter‑Modus beenden\n  /flow — Flow‑Modus umschalten`,
        empOn: 'an', empOff: 'aus'
      },
      en: {
        subtitle: 'Choose your category',
        promo: 'Gaming Laptops · Laptops · Desktop PCs · Chromebooks · Phones · Tablets · E‑Scooters',
        loginTitle: 'Employee Login',
        loginInfo: 'Press Ctrl+Alt+# anytime to open this dialog. Enter passcode:',
        loginHint: 'Default code: 140318 • /login also opens',
        placeholder: 'Type /help for commands… (Ctrl+Alt+# opens login)',
        help: `Commands:\n  /help — show this help\n  /de /en — switch language\n  /theme NAME — themes: standard-black, standard-white, dragon-black-red, dragon-gold, giftgruen\n  /id — show current Bot ID\n  /setid NEW_ID — set Bot ID (stored locally)\n  /category NAME — open category (e.g., gaming-laptops)\n  /login — open login dialog\n  /logout — exit employee mode\n  /flow — toggle Flow mode`,
        empOn: 'on', empOff: 'off'
      }
    };

    const BotConfig = {
      defaultId: 'TGBOT-2025-09-01', // you can change via /setid
      passcode: '140318',            // employee login code
      flowCode: 'FLOW',              // special code keyword; /flow toggles mode
      categories: [
        { id:'gaming-laptops', name:{de:'Gaming‑Laptops', en:'Gaming Laptops'}, icon:'🎮💻' },
        { id:'laptops',        name:{de:'Laptops',        en:'Laptops'},        icon:'💻' },
        { id:'desktop-pcs',    name:{de:'Desktop‑PCs',    en:'Desktop PCs'},    icon:'🖥️' },
        { id:'chromebooks',    name:{de:'Chromebooks',    en:'Chromebooks'},    icon:'💻' },
        { id:'phones',         name:{de:'Handys',         en:'Phones'},         icon:'📱' },
        { id:'tablets',        name:{de:'Tablets',        en:'Tablets'},        icon:'📲' },
        { id:'e-scooters',     name:{de:'E‑Scooter',      en:'E‑Scooters'},     icon:'🛴' }
      ]
    };

    let state = {
      lang: localStorage.getItem('tgb_lang') || 'de',
      botId: localStorage.getItem('tgb_id') || BotConfig.defaultId,
      employee: false,
      flow: false,
      theme: localStorage.getItem('tgb_theme') || 'standard-black'
    };

    function applyLang(){
      $('#subtitle').textContent = tr[state.lang].subtitle;
      $('#promo').textContent = tr[state.lang].promo;
      $('#loginTitle').textContent = tr[state.lang].loginTitle;
      $('#loginInfo').textContent = tr[state.lang].loginInfo;
      $('#loginHint').textContent = tr[state.lang].loginHint;
      $('#inp').placeholder = tr[state.lang].placeholder;
      $('#langBtn').textContent = state.lang === 'de' ? 'EN' : 'DE';
      renderCats();
    }

    function applyTheme(){
      const body = document.body;
      body.className = '';
      body.classList.add('theme-' + state.theme);
      localStorage.setItem('tgb_theme', state.theme);
    }

    function renderCats(){
      const grid = $('#cats');
      grid.innerHTML = '';
      BotConfig.categories.forEach(cat => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <div class="icon">${cat.icon}</div>
          <h3>${cat.name[state.lang]}</h3>
          <p>${cat.id}</p>
          <button class="btn" data-go="${cat.id}">Open</button>
        `;
        card.querySelector('button').addEventListener('click', ()=> openCategory(cat.id));
        grid.appendChild(card);
      });
    }

    function log(msg){
      const el = document.createElement('div');
      el.textContent = msg;
      $('#log').appendChild(el);
      $('#log').scrollTop = $('#log').scrollHeight;
    }

    function setBotId(id){
      state.botId = String(id).trim();
      localStorage.setItem('tgb_id', state.botId);
      $('#botId').textContent = state.botId;
    }

    function openLogin(){ $('#overlay').classList.add('show'); $('#code').focus(); }
    function closeLogin(){ $('#overlay').classList.remove('show'); }

    function openCategory(id){
      log(`[${state.lang==='de'?'Kategorie':'Category'}] ${id} → (Router‑Hook) botId=${state.botId}, flow=${state.flow}`);
      // Here you would navigate to the real page for the category.
    }

    function setEmployee(on){
      state.employee = !!on;
      $('#empState').textContent = on ? tr[state.lang].empOn : tr[state.lang].empOff;
      $('#employeePanel').classList.toggle('active', !!on);
    }

    function toggleFlow(){
      state.flow = !state.flow;
      log(`Flow: ${state.flow ? 'ON' : 'OFF'}`);
    }

    // INIT
    setBotId(state.botId);
    applyTheme();
    applyLang();
    $('#themeSel').value = state.theme;

    // UI handlers
    $('#langBtn').addEventListener('click', ()=>{
      state.lang = state.lang==='de'?'en':'de';
      localStorage.setItem('tgb_lang', state.lang);
      applyLang();
    });
    $('#deBtn').addEventListener('click', ()=>{ state.lang='de'; localStorage.setItem('tgb_lang','de'); applyLang(); });
    $('#enBtn').addEventListener('click', ()=>{ state.lang='en'; localStorage.setItem('tgb_lang','en'); applyLang(); });
    $('#themeSel').addEventListener('change', (e)=>{ state.theme = e.target.value; applyTheme(); });

    $('#helpBtn').addEventListener('click', ()=> log(tr[state.lang].help));

    $('#send').addEventListener('click', handleInput);
    $('#inp').addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ handleInput(); }});

    function handleInput(){
      const v = $('#inp').value.trim();
      if(!v) return;
      $('#inp').value='';
      if(v.startsWith('/')){
        const [cmd, ...rest] = v.slice(1).split(/\s+/);
        const arg = rest.join(' ');
        switch(cmd.toLowerCase()){
          case 'help': log(tr[state.lang].help); break;
          case 'de': state.lang='de'; localStorage.setItem('tgb_lang','de'); applyLang(); log('Sprache: DE'); break;
          case 'en': state.lang='en'; localStorage.setItem('tgb_lang','en'); applyLang(); log('Language: EN'); break;
          case 'theme': if(arg){ state.theme = arg; applyTheme(); log('Theme → '+arg); } else { log('Themes: standard-black, standard-white, dragon-black-red, dragon-gold, giftgruen'); } break;
          case 'id': log('Bot‑ID: '+state.botId); break;
          case 'setid': if(arg){ setBotId(arg); log('Bot‑ID gesetzt.'); } else { log('Nutzung: /setid NEUE_ID'); } break;
          case 'category': if(arg){ openCategory(arg); } else { log('Nutzung: /category NAME'); } break;
          case 'login': openLogin(); break;
          case 'logout': setEmployee(false); log('Logout.'); break;
          case 'flow': toggleFlow(); break;
          default: log('Unbekannter Befehl: /'+cmd);
        }
      } else {
        // Normal bot text – here you could connect to your AI backend
        log((state.lang==='de'?'Du sagst: ':'You said: ') + v);
      }
    }

    // Login overlay
    $('#close').addEventListener('click', closeLogin);
    $('#enter').addEventListener('click', ()=>{
      const code = $('#code').value.trim();
      if(code === BotConfig.passcode || code.toUpperCase() === BotConfig.flowCode){
        setEmployee(true);
        if(code.toUpperCase() === BotConfig.flowCode) state.flow = true;
        closeLogin(); log('Login ok.');
      } else {
        log('Code falsch.');
      }
    });

    // Hotkey: Ctrl+Alt+# (fallback: Ctrl+Alt+3)
    window.addEventListener('keydown', (e)=>{
      if(e.ctrlKey && e.altKey && (e.key === '#' || e.code === 'Digit3')){
        e.preventDefault(); openLogin();
      }
    });

    // Startup message and thumbnails info
    log('T‑Gear Builder bereit. /help eingeben für Befehle.');
    log('Hinweis: Lege die vier Bilder in ./assets/ ab (siehe Dateinamen in der Thumbnails‑Sektion).');
  </script>
</body>
</html>
